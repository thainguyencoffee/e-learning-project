import { Component, inject } from '@angular/core';
import { AsyncPipe, DatePipe, NgClass, NgForOf, NgIf } from "@angular/common";
import { ActivatedRoute, Router, RouterLink, RouterOutlet } from "@angular/router";
import { EnrolmentsService } from "../../../service/enrolments.service";
import { ErrorHandler } from "../../../../common/error-handler.injectable";
import { FormsModule } from "@angular/forms";
import { EnrolmentWithCourseDto } from "../../../model/enrolment-with-course-dto";

// Define the Comment interface
interface Comment {
  user: string;
  text: string;
  replies: Comment[]; // Allows for nested replies
}

@Component({
  selector: 'app-enrolment-posts',
  standalone: true,
  styleUrls: ['enrolment-posts.component.css'],
  imports: [
    NgForOf,
    NgClass,
    RouterLink,
    RouterOutlet,
    NgIf,
    AsyncPipe,
    DatePipe,
    FormsModule
  ],
  templateUrl: './enrolment-posts.component.html',
})
export class EnrolmentPostsComponent {
  route = inject(ActivatedRoute);
  router = inject(Router);
  enrolmentService = inject(EnrolmentsService);
  errorHandler = inject(ErrorHandler);
  enrolmentId?: number;
  enrolmentWithCourse?: EnrolmentWithCourseDto;
  teacher = {
    name: 'Dr. John Doe',
    department: 'Computer Science',
    avatarUrl: 'https://via.placeholder.com/50',
  };

  postsList = [
    {
      title: 'Tìm hiểu về Machine Learning',
      content: 'Machine Learning đang trở thành một công cụ mạnh mẽ trong công nghệ hiện đại. Hãy cùng khám phá...',
      date: new Date(),
      imageUrl: 'data:image/jpeg;base64,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',
    },
  ];

  newPost = {
    title: '',
    content: '',
    imageUrl: '',
    date: new Date()
  };

  // Comments section with Comment type
  likes = 0;
  liked = false;
  showComments = false;
  comments: Comment[] = [
    { user: 'Alice', text: 'Bài viết rất hữu ích, cảm ơn thầy!', replies: [] },
    { user: 'Bob', text: 'Mong thầy sẽ có thêm nhiều bài chia sẻ nữa.', replies: [] }
  ];
  newComment = '';

  toggleComments() {
    this.showComments = !this.showComments;
  }

  addComment() {
    if (this.newComment.trim()) {
      this.comments.push({ replies: [], user: 'Bạn', text: this.newComment });
      this.newComment = '';
    }
  }

  toggleLike() {
    this.likes += this.liked ? -1 : 1;
    this.liked = !this.liked;
  }

  // Function to add a reply to a comment
  addReply(comment: Comment) {
    if (this.newComment.trim()) {
      comment.replies.push({ user: 'Bạn', text: this.newComment, replies: [] });
      this.newComment = ''; // Clear the input
    }
  }
}
